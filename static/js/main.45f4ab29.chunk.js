(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],{28:function(e,t,n){e.exports=n(60)},39:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),c=n(9),u=n.n(c),o=n(3),i=(n(39),n(7)),l=n(24),m=n(1),p=n.n(m),f=n(6),d=n(4),g=n(25),v=n.n(g).a.create({baseURL:"https://starnavi-frontend-test-task.herokuapp.com"}),b=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/game-settings");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/winners");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/winners",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={easyMode:null,normalMode:null,hardMode:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-GAME-SETTINGS":return Object(d.a)({},e,{easyMode:t.modes.easyMode,normalMode:t.modes.normalMode,hardMode:t.modes.hardMode});default:return e}},S={winners:null},j=function(e){return{type:"SET-WINNERS",winners:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-WINNERS":return Object(d.a)({},e,{winners:t.winners});default:return e}},M=Object(i.c)({gameSettings:w,winners:y}),N=Object(i.d)(M,Object(i.a)(l.a)),x=(n(58),n(5));!function(e){e[e.isPreparing=0]="isPreparing",e[e.isPlaying=1]="isPlaying",e[e.gameOver=2]="gameOver"}(a||(a={}));var P=function(e){var t=Object(r.useState)(""),n=Object(x.a)(t,2),c=n[0],u=n[1];return s.a.createElement("form",null,s.a.createElement("select",{disabled:e.gameStatus!==a.isPreparing,value:c,onChange:function(t){u(t.target.value),e.setGameMode(Object(d.a)({},e.gameSettings[t.target.value]))}},!c&&s.a.createElement("option",{value:""},"Pick game mode"),s.a.createElement("option",{value:"easyMode"},"Easy"),s.a.createElement("option",{value:"normalMode"},"Normal"),s.a.createElement("option",{value:"hardMode"},"Hard")),s.a.createElement("input",{type:"text",disabled:e.gameStatus!==a.isPreparing,placeholder:"Enter your name",value:e.userName,onChange:function(t){return e.setUserName(t.target.value)}}),s.a.createElement("button",{type:"button",disabled:!c||!e.userName||e.gameStatus===a.isPlaying,onClick:function(){e.gameStatus===a.isPreparing?e.setGameStatus(a.isPlaying):(e.setGameStatus(a.isPreparing),u(""),e.setGameMode(null),e.setPoints({user:0,computer:0}))}},e.gameStatus!==a.gameOver?"PLAY":"PLAY AGAIN"))},k=Object(o.b)((function(e){return{gameSettings:e.gameSettings}}))((function(e){return s.a.createElement(P,e)})),G=n(26),I=n.n(G),T=function(e){var t=e.gameStatus,n=e.points,r=e.userName;return s.a.createElement("div",{className:"resultPanel"},t===a.gameOver&&"".concat(n.user>n.computer?r:"computer"," won"))},W=Object(o.b)(null,{postWinner:function(e){return function(){var t=Object(f.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return a=t.sent,t.next=5,n(j(a));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(r.useEffect)((function(){var t=e.points.user>e.points.computer?e.userName:"computer",n=I()().format("lll");e.postWinner({winner:t,date:n})})),s.a.createElement(T,e)})),A=n(27),B=function(e){var t=Object(r.useState)(null),n=Object(x.a)(t,2),c=n[0],u=n[1],o=Object(r.useState)(null),i=Object(x.a)(o,2),l=i[0],m=i[1];Object(r.useEffect)((function(){e.gameMode.field&&u(function(e){for(var t=[],n=0;n<e;n++){t[n]=[];for(var a=0;a<e;a++)t[n][a]=0}return t}(e.gameMode.field))}),[e.gameMode.field]);var p=function(e){for(var t=[],n=0;n<c.length;n++)t[n]=Object(A.a)(c[n]);return t[l.y][l.x]="user"===e?2:3,t},f=function(e){var t,n;do{t=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*e.length)}while(e[n][t]);m({x:t,y:n})};Object(r.useEffect)((function(){if(e.gameStatus===a.isPlaying){if(l){var t=setInterval((function(){var t=p("computer");u(t);var n=e.points.computer+1;e.setPoints(Object(d.a)({},e.points,{computer:n})),n>Math.pow(c.length,2)/2?(e.setGameStatus(a.gameOver),m(null)):f(t)}),e.gameMode.delay);return function(){return clearTimeout(t)}}f(c)}}));var g=function(t){if(e.gameStatus===a.isPlaying){var n,r,s=t.target.parentElement.className.lastIndexOf(" ")+1,o=+t.target.parentElement.className.slice(s),i=t.target.className.lastIndexOf(" ")+1,f=+t.target.className.slice(i);l.y===o&&l.x===f?(n=p("user"),r=e.points.user+1,e.setPoints(Object(d.a)({},e.points,{user:r}))):(n=p("computer"),r=e.points.computer+1,e.setPoints(Object(d.a)({},e.points,{computer:r}))),r>Math.pow(c.length,2)/2&&e.setGameStatus(a.gameOver),u(n),m(null)}},v=["white","skyblue","lightgreen","pink"];return s.a.createElement("div",{className:"playField"},c&&c.map((function(e,t){return s.a.createElement("div",{key:t,className:"row".concat(e.length," ").concat(t)},e.map((function(e,n){return s.a.createElement("div",{key:n,className:"cell ".concat(n),onClick:g,style:{backgroundColor:v[l&&l.y===t&&l.x===n?1:e]}})})))})))},C=function(){var e=Object(r.useState)(a.isPreparing),t=Object(x.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(null),o=Object(x.a)(u,2),i=o[0],l=o[1],m=Object(r.useState)(""),p=Object(x.a)(m,2),f=p[0],d=p[1],g=Object(r.useState)({user:0,computer:0}),v=Object(x.a)(g,2),b=v[0],h=v[1];return s.a.createElement("div",{className:"gameBoard"},s.a.createElement(k,{gameStatus:n,setGameStatus:c,setGameMode:l,setPoints:h,userName:f,setUserName:d}),n===a.gameOver&&s.a.createElement(W,{gameStatus:n,points:b,userName:f}),i&&s.a.createElement(B,{gameMode:i,gameStatus:n,setGameStatus:c,points:b,setPoints:h}))},L=function(e){var t=e.winners&&e.winners.map((function(e){return s.a.createElement("div",{key:e.id,className:"winner"},s.a.createElement("span",null,e.winner),s.a.createElement("span",null,e.date))}));return s.a.createElement("div",{className:"leaderBoard"},s.a.createElement("h2",null,"Leader Board"),s.a.createElement("div",{className:"winners"},t))},R=Object(o.b)((function(e){return{winners:e.winners.winners}}))((function(e){return s.a.createElement(L,e)}));var U=function(){return s.a.createElement("div",{className:"app"},s.a.createElement(C,null),s.a.createElement(R,null))},J=Object(o.b)(null,{getGameSettings:function(){return function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return n=e.sent,e.next=5,t({type:"SET-GAME-SETTINGS",modes:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getWinners:function(){return function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,e.next=5,t(j(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(r.useEffect)((function(){e.getGameSettings(),e.getWinners()})),s.a.createElement(U,null)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(o.a,{store:N},s.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.45f4ab29.chunk.js.map