(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],{28:function(e,t,n){e.exports=n(60)},39:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(10),u=n.n(s),o=n(4),i=(n(39),n(7)),l=n(25),m=n(1),f=n.n(m),d=n(6),p=n(5),g=n(26),v=n.n(g).a.create({baseURL:"https://starnavi-frontend-test-task.herokuapp.com"}),b=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/game-settings");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/winners");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/winners",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={easyMode:null,normalMode:null,hardMode:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-GAME-SETTINGS":return Object(p.a)({},e,{easyMode:t.modes.easyMode,normalMode:t.modes.normalMode,hardMode:t.modes.hardMode});default:return e}},j=n(9),w={winners:null},y=function(e){return{type:"SET-WINNERS",winners:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-WINNERS":return Object(p.a)({},e,{winners:t.winners});default:return e}},N=Object(i.c)({gameSettings:S,winners:M}),P=Object(i.d)(N,Object(i.a)(l.a)),x=(n(58),n(3));!function(e){e[e.isPreparing=0]="isPreparing",e[e.isPlaying=1]="isPlaying",e[e.gameOver=2]="gameOver"}(a||(a={}));var k=function(e){var t=Object(r.useState)(""),n=Object(x.a)(t,2),s=n[0],u=n[1],o=Object(r.useState)(""),i=Object(x.a)(o,2),l=i[0],m=i[1];return c.a.createElement("form",null,c.a.createElement("select",{disabled:e.gameStatus!==a.isPreparing,value:s,onChange:function(t){u(t.target.value),e.setGameMode(Object(p.a)({},e.gameSettings[t.target.value]))}},!s&&c.a.createElement("option",{value:""},"Pick game mode"),c.a.createElement("option",{value:"easyMode"},"Easy"),c.a.createElement("option",{value:"normalMode"},"Normal"),c.a.createElement("option",{value:"hardMode"},"Hard")),c.a.createElement("input",{type:"text",disabled:e.gameStatus!==a.isPreparing,placeholder:"Enter your name",value:l,onChange:function(e){return m(e.target.value)}}),c.a.createElement("button",{type:"button",disabled:!s||!l||e.gameStatus===a.isPlaying,onClick:function(){e.gameStatus===a.isPreparing?(e.setGameStatus(a.isPlaying),e.setUserName(l)):(e.setGameStatus(a.isPreparing),u(""),e.setGameMode(null))}},e.gameStatus!==a.gameOver?"PLAY":"PLAY AGAIN"))},G=Object(o.b)((function(e){return{gameSettings:e.gameSettings}}))((function(e){return c.a.createElement(k,e)})),I=n(27),T=n.n(I),W=function(e){var t=e.gameStatus,n=e.finalPoints,r=e.userName;return c.a.createElement("div",{className:"resultPanel"},t===a.gameOver&&"".concat(n.user>n.computer?r:"computer"," won"))},A=Object(o.b)(null,{postWinner:function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:return a=t.sent,t.next=5,n(y(Object(j.a)(a).reverse()));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(r.useEffect)((function(){var t=e.finalPoints.user>e.finalPoints.computer?e.userName:"computer",n=T()().format("lll");e.postWinner({winner:t,date:n})})),c.a.createElement(W,e)})),B=function(e){var t=Object(r.useState)(null),n=Object(x.a)(t,2),s=n[0],u=n[1],o=Object(r.useState)(null),i=Object(x.a)(o,2),l=i[0],m=i[1],f=Object(r.useState)({user:0,computer:0}),d=Object(x.a)(f,2),g=d[0],v=d[1];Object(r.useEffect)((function(){e.gameMode.field&&u(function(e){for(var t=[],n=0;n<e;n++){t[n]=[];for(var a=0;a<e;a++)t[n][a]=0}return t}(e.gameMode.field))}),[e.gameMode.field]);var b=function(e){for(var t=[],n=0;n<s.length;n++)t[n]=Object(j.a)(s[n]);return t[l.y][l.x]="user"===e?2:3,t},E=function(e){var t,n;do{t=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*e.length)}while(e[n][t]);m({x:t,y:n})};Object(r.useEffect)((function(){if(e.gameStatus===a.isPlaying){if(l){var t=setInterval((function(){var t=b("computer");u(t);var n=g.computer+1;v(Object(p.a)({},g,{computer:n})),n>Math.pow(s.length,2)/2?(e.setGameStatus(a.gameOver),e.setFinalPoints(g),m(null)):E(t)}),e.gameMode.delay);return function(){return clearTimeout(t)}}E(s)}}));var O=function(t){if(e.gameStatus===a.isPlaying){var n,r,c=t.target.parentElement.className.lastIndexOf(" ")+1,o=+t.target.parentElement.className.slice(c),i=t.target.className.lastIndexOf(" ")+1,f=+t.target.className.slice(i);l.y===o&&l.x===f?(n=b("user"),r=g.user+1,v(Object(p.a)({},g,{user:r}))):(n=b("computer"),r=g.computer+1,v(Object(p.a)({},g,{computer:r}))),r>Math.pow(s.length,2)/2&&(e.setGameStatus(a.gameOver),e.setFinalPoints(g)),u(n),m(null)}},h=["free","current","hit","miss"];return c.a.createElement(c.a.Fragment,null,e.gameStatus===a.isPlaying?c.a.createElement("div",{className:"resultPanel"},g.user," : ",g.computer):e.gameStatus===a.isPreparing&&c.a.createElement("div",{className:"resultPanel"}),c.a.createElement("div",{className:"playField"},s&&s.map((function(e,t){return c.a.createElement("div",{key:t,className:"row".concat(e.length," ").concat(t)},e.map((function(e,n){return c.a.createElement("div",{key:n,onClick:O,className:"cell ".concat(h[l&&l.y===t&&l.x===n?1:e]," ").concat(n)})})))}))))},F=function(){var e=Object(r.useState)(a.isPreparing),t=Object(x.a)(e,2),n=t[0],s=t[1],u=Object(r.useState)(null),o=Object(x.a)(u,2),i=o[0],l=o[1],m=Object(r.useState)(""),f=Object(x.a)(m,2),d=f[0],p=f[1],g=Object(r.useState)({user:0,computer:0}),v=Object(x.a)(g,2),b=v[0],E=v[1];return c.a.createElement("div",{className:"gameBoard"},c.a.createElement(G,{gameStatus:n,setGameStatus:s,setGameMode:l,setUserName:p}),n===a.gameOver&&c.a.createElement(A,{gameStatus:n,finalPoints:b,userName:d}),i&&c.a.createElement(B,{gameMode:i,gameStatus:n,setGameStatus:s,setFinalPoints:E}))},C=function(e){var t=e.winners&&e.winners.map((function(e){return c.a.createElement("div",{key:e.id,className:"winner"},c.a.createElement("span",null,e.winner),c.a.createElement("span",null,e.date))}));return c.a.createElement("div",{className:"leaderBoard"},c.a.createElement("h2",null,"Leader Board"),c.a.createElement("div",{className:"winners"},t))},L=Object(o.b)((function(e){return{winners:e.winners.winners}}))((function(e){return c.a.createElement(C,e)}));var R=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(F,null),c.a.createElement(L,null))},U=Object(o.b)(null,{getGameSettings:function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return n=e.sent,e.next=5,t({type:"SET-GAME-SETTINGS",modes:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getWinners:function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return n=e.sent,e.next=5,t(y(Object(j.a)(n).reverse()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(r.useEffect)((function(){e.getGameSettings(),e.getWinners()})),c.a.createElement(R,null)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:P},c.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.23e3d302.chunk.js.map